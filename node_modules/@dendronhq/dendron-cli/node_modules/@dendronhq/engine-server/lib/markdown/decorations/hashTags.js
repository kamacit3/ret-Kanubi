"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.decorateTag = exports.decorateHashTag = exports.isDecorationHashTag = void 0;
const common_all_1 = require("@dendronhq/common-all");
const wikilinks_1 = require("./wikilinks");
function isDecorationHashTag(decoration) {
    return decoration.color !== undefined;
}
exports.isDecorationHashTag = isDecorationHashTag;
const decorateHashTag = (opts) => {
    const { node: hashtag, engine } = opts;
    const { position } = hashtag;
    return decorateTag({
        fname: hashtag.fname,
        engine,
        position,
    });
};
exports.decorateHashTag = decorateHashTag;
async function decorateTag({ fname, engine, position, lineOffset, }) {
    let color;
    const { color: foundColor, type: colorType } = common_all_1.NoteUtils.color({
        fname,
        engine,
    });
    if (colorType === "configured" || !engine.config.noRandomlyColoredTags) {
        color = foundColor;
    }
    const { type, errors } = await (0, wikilinks_1.linkedNoteType)({ fname, engine });
    const decoration = {
        type,
        range: (0, common_all_1.position2VSCodeRange)(position, { line: lineOffset }),
        color,
    };
    return { errors, decorations: [decoration] };
}
exports.decorateTag = decorateTag;
//# sourceMappingURL=hashTags.js.map