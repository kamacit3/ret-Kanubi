"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.ConfigController = void 0;
const common_all_1 = require("@dendronhq/common-all");
const memoryStore_1 = require("../store/memoryStore");
const utils_1 = require("../utils");
class ConfigController {
    static instance() {
        if (!ConfigController.singleton) {
            ConfigController.singleton = new ConfigController();
        }
        return ConfigController.singleton;
    }
    async get({ ws }) {
        const engine = ws
            ? await (0, utils_1.getWSEngine)({ ws })
            : memoryStore_1.MemoryStore.instance().getEngine();
        try {
            const resp = await engine.getConfig();
            return resp;
        }
        catch (err) {
            return {
                error: new common_all_1.DendronError({ message: JSON.stringify(err) }),
                data: undefined,
            };
        }
    }
    async write({ ws, ...opts }) {
        const engine = ws
            ? await (0, utils_1.getWSEngine)({ ws })
            : memoryStore_1.MemoryStore.instance().getEngine();
        try {
            const resp = await engine.writeConfig(opts);
            return resp;
        }
        catch (err) {
            return {
                error: new common_all_1.DendronError({ message: JSON.stringify(err) }),
                data: undefined,
            };
        }
    }
}
exports.ConfigController = ConfigController;
//# sourceMappingURL=config.js.map